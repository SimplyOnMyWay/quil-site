function k(a){return"number"==typeof a};let l={data:{m:null,l:null}},m=null,p=[307.3,307.3*6/5,307.3*3/2,491.68,307.3*9/5,614.6,307.3*12/5];async function aa(){if(!m)try{m=new AudioContext}catch(d){return null}try{var a=new AudioWorkletNode(m,"instrument-processor",{processorOptions:{f0s_:p}})}catch(d){try{await m.audioWorklet.addModule("instrument-processor-hybrid-compiled.js"),a=new AudioWorkletNode(m,"instrument-processor",{processorOptions:{f0s_:p}})}catch(c){return null}}await m.resume();return a}
async function ba(){var a=await aa();if(a){a.connect(m.destination);a.port.onmessage=b=>{l=b};var d=function(b){a.port.postMessage({type:"play",stringno:b})},c=Array(p.length),g=[4E3,8100,5600,12600,9200,14100,3100];c=[19700,17800,21300,22100,18400,2E4,17700].map(b=>1*b);for(let b=0;b<p.length;b++)setTimeout(()=>d(b),g[b]);for(let b=0;b<p.length;b++)setInterval(()=>{setTimeout(()=>d(b),1E4-8500*Math.random())},c[b])}}
window.addEventListener("load",()=>{document.getElementById("toggle").addEventListener("click",ca)});async function ca(){console.log("button clicked!");m?(await m.close(),m=null):ba()}function q(a){this.a=parseInt(a.substr(0,8),16);this.b=parseInt(a.substr(8,8),16);this.c=parseInt(a.substr(16,8),16);this.d=parseInt(a.substr(24,8),16)}
function r(a){a.a|=0;a.b|=0;a.c|=0;a.d|=0;let d=(a.a+a.b|0)+a.d|0;a.d=a.d+1|0;a.a=a.b^a.b>>>9;a.b=a.c+(a.c<<3)|0;a.c=a.c<<21|a.c>>>11;a.c=a.c+d|0;return(d>>>0)/4294967296}let t=0;function u(a){a.h=!a.h;return a.h?r(a.i):r(a.j)}function v(a){return Math.floor((a+1-0)*u(w))}function x(a,d){var c=w;let g,b;d=k(d)?d:1;if(c.g){var f=t;c.g=!1}else{do f=2*u(c)-1,g=2*u(c)-1,b=f*f+g*g;while(1<=b);b=Math.sqrt(-2*Math.log(b)/b);f*=b;t=g*b;c.g=!0}return f*d+(a||0)}
function y(a,d,c){let g;g=u(w);return Math.pow(-(g*Math.pow(d,c)-g*Math.pow(a,c)-Math.pow(d,c))/(Math.pow(d,c)*Math.pow(a,c)),-1/c)}var w=new function(){this.h=!1;this.i=new q(tokenData.hash.substr(2,32));this.j=new q(tokenData.hash.substr(34,32));for(let a=0;1E6>a;a+=2)r(this.i),r(this.j);this.g=!1},z=Math.min(window.innerWidth,window.innerHeight),A=(1+Math.sqrt(5))/2,B=Math.PI,C=[48,42,27,1],D=[[208,65,74,1],[107,60,45,1],[79,83,74,1],[0,76,94,1]],E=-.5*B,da=-5*B/E,F=.125*B,ea=(3*B-B)/F;
console.log("noIter = ",7);var G=[0,0,0];for(let a=3;a<da+3;a++)G[a]=(a-3)*E;var H=[];for(let a=0;a<ea;a++)H[a]=B+a*F;var I=Array(7).fill(0),J=Array(7).fill(0),L=Array(18).fill(0),M=Array(7).fill(0),N=Array(18).fill(0),O=Array(7).fill(0),P=[0,y(.01,.1,.1)],Q=Array(7).fill(0),R=[10,y(5,20,1.16)],S=[],T=[.005,y(.005,.1,1.16)],U=Array(7).fill(0),V=Array(7).fill(0),W=[],X=[],fa=[],Y=[];for(let a=0;6>a;a++)L[a]=.5;for(let a=6;12>a;a++)L[a]=1/(1+A)/(1+A);for(let a=12;18>a;a++)L[a]=1-1/(1+A)/(1+A);
for(let a=0;8>a;a++)N[a]=1/(1+A)/(1+A);for(let a=8;15>a;a++)N[a]=1-1/(1+A)/(1+A);for(let a=15;16>a;a++)N[a]=A-1;for(let a=16;18>a;a++)N[a]=2-A;
for(let a=0;7>a;a++){I[a]=G[v(G.length-1)];J[a]=H[v(H.length-1)];M[a]=L[v(L.length-1)];O[a]=N[v(N.length-1)];Q[a]=P[v(P.length-1)];S[a]=R[v(R.length-1)];U[a]=T[v(T.length-1)];V[a]=.01>=U[a]&&.01>=Q[a]?5E-4:.01<U[a]&&.05>U[a]&&.01>=Q[a]?.001:5E-5;W[a]=v(D.length-1);Y[a]=(A-1)/U[a];let d=[];for(let c=0;c<Y[a];c++){fa[c]=1+c*U[a];var ha=fa[c],ia=I[a];let g=(J[a]-ia)/40,b=[],f=[],n=[];for(let e=0;40>=e;e++){b[e]=ia+g*e;var Z=ha;Z=k(Z)?Z:A;f[e]=Math.pow(Z,2*b[e]/B);n[e]=[f[e]*Math.cos(b[e]),f[e]*Math.sin(b[e])]}d[c]=
n}X[a]=d}setup=function(){createCanvas(z,z);colorMode(HSB,360,100,100,1)};
draw=function(){let a;l.data.msg="analysis";a=l.data.amplitude;console.log(l.data);background(C[0],C[1],C[2],C[3]);noFill();for(let h=0;7>h;h++){stroke(D[W[h]][0],D[W[h]][1],D[W[h]][2],D[W[h]][3]);strokeWeight(width*V[h]);for(let K=0;K<Y[h];K++){var d=X[h][K],c=Q[h],g=100*S[h]*a,b=M[h],f=O[h],n=0[h],e=0[h];f=k(f)?f:.5;e=k(e)?e:0;b=(k(b)?b:.5)+x(0,k(n)?n:0);n=f+x(0,e);translate(width*b,height*n);beginShape();for(f=0;f<d.length;f++)e=d[f],e=[x(e[0],c)/g,x(e[1],c)/g],vertex(width*e[0],height*e[1]);endShape();
translate(width*-b,height*-n)}}};
