function m(a){return"number"==typeof a};window.g=7;window.i=0;window.h=Array(window.g).fill(1);window.j=Array(window.g).fill(0);function n(a){this.a=parseInt(a.substr(0,8),16);this.b=parseInt(a.substr(8,8),16);this.c=parseInt(a.substr(16,8),16);this.d=parseInt(a.substr(24,8),16)}function p(a){a.a|=0;a.b|=0;a.c|=0;a.d|=0;let e=(a.a+a.b|0)+a.d|0;a.d=a.d+1|0;a.a=a.b^a.b>>>9;a.b=a.c+(a.c<<3)|0;a.c=a.c<<21|a.c>>>11;a.c=a.c+e|0;return(e>>>0)/4294967296}let q=0;function r(a){a.h=!a.h;return a.h?p(a.i):p(a.j)}
function t(a){return Math.floor((a+1-0)*r(u))}function v(a,e){var d=u;let f,b;e=m(e)?e:1;if(d.g){var k=q;d.g=!1}else{do k=2*r(d)-1,f=2*r(d)-1,b=k*k+f*f;while(1<=b);b=Math.sqrt(-2*Math.log(b)/b);k*=b;q=f*b;d.g=!0}return k*e+(a||0)}function w(a,e,d){let f;f=r(u);return Math.pow(-(f*Math.pow(e,d)-f*Math.pow(a,d)-Math.pow(e,d))/(Math.pow(e,d)*Math.pow(a,d)),-1/d)}
var u=new function(){this.h=!1;this.i=new n(tokenData.hash.substr(2,32));this.j=new n(tokenData.hash.substr(34,32));for(let a=0;1E6>a;a+=2)p(this.i),p(this.j);this.g=!1};let x=null,y=[307.3,307.3*6/5,307.3*3/2,491.68,307.3*9/5,614.6,307.3*12/5];
async function aa(){if(!x)try{x=new AudioContext}catch(e){return null}try{var a=new AudioWorkletNode(x,"instrument-processor",{processorOptions:{f0s_:y}})}catch(e){try{await x.audioWorklet.addModule("js/instrument-processor-compiled.js"),a=new AudioWorkletNode(x,"instrument-processor",{processorOptions:{f0s_:y,RNG:u}})}catch(d){return null}}await x.resume();return a}
async function ba(){var a=await aa();if(a){a.connect(x.destination);a.port.onmessage=b=>{window.h[b.data.stringno]=b.data.amplitude;window.i=b.data.stringno};var e=function(b){a.port.postMessage({type:"play",stringnum:b})},d=Array(y.length),f=[4E3,8100,5600,12600,9200,14100,3100];d=[19700,17800,21300,22100,18400,2E4,17700].map(b=>1*b);for(let b=0;b<y.length;b++)setTimeout(()=>e(b),f[b]);for(let b=0;b<y.length;b++)setInterval(()=>{setTimeout(()=>e(b),1500+8500*r(u))},d[b])}}
window.addEventListener("load",()=>{document.getElementById("toggle").addEventListener("click",ca)});async function ca(){x?(window.h=Array(window.g).fill(1),await x.close(),x=null):ba()}var z=Math.min(window.innerWidth,window.innerHeight),A=(1+Math.sqrt(5))/2,B=Math.PI,C=[48,42,27,1],D=[[208,65,74,1],[107,60,45,1],[79,83,74,1],[0,76,94,1]],E=-.5*B,da=-5*B/E,F=.125*B,ea=(3*B-B)/F,G=window.g;console.log("noIter = ",G);var H=[0,0,0];for(let a=3;a<da+3;a++)H[a]=(a-3)*E;var I=[];
for(let a=0;a<ea;a++)I[a]=B+a*F;var J=Array(G).fill(0),K=Array(G).fill(0),M=Array(18).fill(0),N=Array(G).fill(0),O=Array(18).fill(0),P=Array(G).fill(0),Q=[0,w(.01,.1,.1)],R=Array(G).fill(0),S=[10,w(5,20,1.16)],T=[],U=[.005,w(.005,.1,1.16)],V=Array(G).fill(0),W=Array(G).fill(0),X=[],fa=[],ha=[],Y=[];for(let a=0;6>a;a++)M[a]=.5;for(let a=6;12>a;a++)M[a]=1/(1+A)/(1+A);for(let a=12;18>a;a++)M[a]=1-1/(1+A)/(1+A);for(let a=0;8>a;a++)O[a]=1/(1+A)/(1+A);for(let a=8;15>a;a++)O[a]=1-1/(1+A)/(1+A);
for(let a=15;16>a;a++)O[a]=A-1;for(let a=16;18>a;a++)O[a]=2-A;
for(let a=0;a<G;a++){J[a]=H[t(H.length-1)];K[a]=I[t(I.length-1)];N[a]=M[t(M.length-1)];P[a]=O[t(O.length-1)];R[a]=Q[t(Q.length-1)];T[a]=S[t(S.length-1)];V[a]=U[t(U.length-1)];W[a]=.01>=V[a]&&.01>=R[a]?5E-4:.01<V[a]&&.05>V[a]&&.01>=R[a]?.001:5E-4;X[a]=t(D.length-1);Y[a]=(A-1)/V[a];let e=[];for(let d=0;d<Y[a];d++){ha[d]=1+d*V[a];var ia=ha[d],ja=J[a];let f=(K[a]-ja)/100,b=[],k=[],l=[];for(let c=0;100>=c;c++){b[c]=ja+f*c;var Z=ia;Z=m(Z)?Z:A;k[c]=Math.pow(Z,2*b[c]/B);l[c]=[k[c]*Math.cos(b[c]),k[c]*Math.sin(b[c])]}e[d]=
l}fa[a]=e}setup=function(){createCanvas(z,z);colorMode(HSB,360,100,100,1);frameRate(60)};
draw=function(){background(C[0],C[1],C[2],C[3]);noFill();for(let c=0;c<G;c++){var a=Math.pow(50*window.h[c],3);stroke(D[X[c]][0],D[X[c]][1],D[X[c]][2],1<a?1:a);strokeWeight(width*W[c]);for(let L=0;L<Y[c];L++){a=fa[c][L];var e=R[c],d=T[c],f=N[c],b=P[c],k=0[c],l=0[c];b=m(b)?b:.5;l=m(l)?l:0;f=(m(f)?f:.5)+v(0,m(k)?k:0);k=b+v(0,l);translate(width*f,height*k);beginShape();for(b=0;b<a.length;b++)l=a[b],l=[v(l[0],e)/d,v(l[1],e)/d],vertex(width*l[0],height*l[1]);endShape();translate(width*-f,height*-k)}}};
