function k(a){return"number"==typeof a};let l={data:{m:null,l:[0]}};function m(a){this.a=parseInt(a.substr(0,8),16);this.b=parseInt(a.substr(8,8),16);this.c=parseInt(a.substr(16,8),16);this.d=parseInt(a.substr(24,8),16)}function n(a){a.a|=0;a.b|=0;a.c|=0;a.d|=0;let d=(a.a+a.b|0)+a.d|0;a.d=a.d+1|0;a.a=a.b^a.b>>>9;a.b=a.c+(a.c<<3)|0;a.c=a.c<<21|a.c>>>11;a.c=a.c+d|0;return(d>>>0)/4294967296}let q=0;function r(a){a.h=!a.h;return a.h?n(a.i):n(a.j)}function t(a,d){return Math.floor(a+(d+1-a)*r(u))}
function v(a,d){var c=u;let g,b;d=k(d)?d:1;if(c.g){var f=q;c.g=!1}else{do f=2*r(c)-1,g=2*r(c)-1,b=f*f+g*g;while(1<=b);b=Math.sqrt(-2*Math.log(b)/b);f*=b;q=g*b;c.g=!0}return f*d+(a||0)}function w(a,d,c){let g;g=r(u);return Math.pow(-(g*Math.pow(d,c)-g*Math.pow(a,c)-Math.pow(d,c))/(Math.pow(d,c)*Math.pow(a,c)),-1/c)}var u=new function(){this.h=!1;this.i=new m(tokenData.hash.substr(2,32));this.j=new m(tokenData.hash.substr(34,32));for(let a=0;1E6>a;a+=2)n(this.i),n(this.j);this.g=!1};
let x=null,y=[307.3,307.3*6/5,307.3*3/2,491.68,307.3*9/5,614.6,307.3*12/5];async function aa(){if(!x)try{x=new AudioContext}catch(d){return null}try{var a=new AudioWorkletNode(x,"instrument-processor",{processorOptions:{f0s_:y}})}catch(d){try{await x.audioWorklet.addModule("js/instrument-processor-hybrid-compiled.js"),a=new AudioWorkletNode(x,"instrument-processor",{processorOptions:{f0s_:y,RNG:u}})}catch(c){return null}}await x.resume();return a}
async function ba(){var a=await aa();if(a){a.connect(x.destination);a.port.onmessage=b=>{l=b};var d=function(b){a.port.postMessage({type:"play",stringno:b})},c=Array(y.length),g=[4E3,8100,5600,12600,9200,14100,3100];c=[19700,17800,21300,22100,18400,2E4,17700].map(b=>1*b);for(let b=0;b<y.length;b++)setTimeout(()=>d(b),g[b]);for(let b=0;b<y.length;b++)setInterval(()=>{setTimeout(()=>d(b),1500+8500*r(u))},c[b])}}
window.addEventListener("load",()=>{document.getElementById("toggle").addEventListener("click",ca)});async function ca(){x?(await x.close(),x=null):ba()}var z=Math.min(window.innerWidth,window.innerHeight),A=(1+Math.sqrt(5))/2,B=Math.PI,C=[48,42,27,1],D=[[208,65,74,1],[107,60,45,1],[79,83,74,1],[0,76,94,1]],E=-.5*B,da=-5*B/E,F=.125*B,ea=(3*B-B)/F,G=t(3,7);console.log("noIter = ",G);var H=[0,0,0];for(let a=3;a<da+3;a++)H[a]=(a-3)*E;var I=[];for(let a=0;a<ea;a++)I[a]=B+a*F;
var J=Array(G).fill(0),K=Array(G).fill(0),M=Array(18).fill(0),N=Array(G).fill(0),O=Array(18).fill(0),P=Array(G).fill(0),Q=[0,w(.01,.1,.1)],R=Array(G).fill(0),S=[10,w(5,20,1.16)],T=[],U=[.005,w(.005,.1,1.16)],V=Array(G).fill(0),W=Array(G).fill(0),X=[],fa=[],ha=[],Y=[];for(let a=0;6>a;a++)M[a]=.5;for(let a=6;12>a;a++)M[a]=1/(1+A)/(1+A);for(let a=12;18>a;a++)M[a]=1-1/(1+A)/(1+A);for(let a=0;8>a;a++)O[a]=1/(1+A)/(1+A);for(let a=8;15>a;a++)O[a]=1-1/(1+A)/(1+A);for(let a=15;16>a;a++)O[a]=A-1;
for(let a=16;18>a;a++)O[a]=2-A;
for(let a=0;a<G;a++){J[a]=H[t(0,H.length-1)];K[a]=I[t(0,I.length-1)];N[a]=M[t(0,M.length-1)];P[a]=O[t(0,O.length-1)];R[a]=Q[t(0,Q.length-1)];T[a]=S[t(0,S.length-1)];V[a]=U[t(0,U.length-1)];W[a]=.01>=V[a]&&.01>=R[a]?5E-4:.01<V[a]&&.05>V[a]&&.01>=R[a]?.001:5E-5;X[a]=t(0,D.length-1);Y[a]=(A-1)/V[a];let d=[];for(let c=0;c<Y[a];c++){ha[c]=1+c*V[a];var ia=ha[c],ja=J[a];let g=(K[a]-ja)/40,b=[],f=[],p=[];for(let e=0;40>=e;e++){b[e]=ja+g*e;var Z=ia;Z=k(Z)?Z:A;f[e]=Math.pow(Z,2*b[e]/B);p[e]=[f[e]*Math.cos(b[e]),
f[e]*Math.sin(b[e])]}d[c]=p}fa[a]=d}setup=function(){createCanvas(z,z);colorMode(HSB,360,100,100,1)};
draw=function(){let a=Array(G).fill(0);l.data.msg="analysis";a[3]=l.data.amplitude;background(C[0],C[1],C[2],C[3]);noFill();for(let h=0;h<G;h++){stroke(D[X[h]][0],D[X[h]][1],D[X[h]][2],10*a[h]);strokeWeight(width*W[h]);for(let L=0;L<Y[h];L++){var d=fa[h][L],c=R[h],g=T[h],b=N[h],f=P[h],p=0[h],e=0[h];f=k(f)?f:.5;e=k(e)?e:0;b=(k(b)?b:.5)+v(0,k(p)?p:0);p=f+v(0,e);translate(width*b,height*p);beginShape();for(f=0;f<d.length;f++)e=d[f],e=[v(e[0],c)/g,v(e[1],c)/g],vertex(width*e[0],height*e[1]);endShape();
translate(width*-b,height*-p)}}};
